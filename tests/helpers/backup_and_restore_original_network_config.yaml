- name: Save Debian network configuration
  shell: |
    [ -d /tmp/save_network_config ] && exit
    mkdir /tmp/save_network_config
    cp -av /etc/network/interfaces* /tmp/save_network_config
  when:
    - action == 'backup'
    - ansible_os_family == "Debian"

- name: Restore Debian network configuration
  shell: |
    [ -d /tmp/save_network_config ] || exit
    rm -rf /etc/network/interfaces*
    cp -av /tmp/save_network_config/* /etc/network/
    rm -rf /tmp/save_network_config
  when:
    - action == 'restore'
    - ansible_os_family == "Debian"
    
    
