- hosts: all
  vars:
  become: yes
  tasks:

    - include_tasks: helpers/set_test_variables.yaml

    - include_tasks: helpers/backup_and_restore_original_network_config.yaml
      vars:
        action: backup

    - name: Configure loopback only
      import_role:
        name: network_interface
      vars:
        network_ether_interfaces:
          - device: lo
            # debian_command_options:
            #   - 'up true'
            #   - 'down true'
              

    - name: debug pause after role has run
      include_tasks: helpers/debug_pause.yaml

    # - block:
    #     - name: Test
    #       include_tasks: helpers/compare_lines.yaml
    #       vars:
    #         compare_lines_from_file: "{{ net_path }}/{{ network_interface_file_prefix }}{{ network_interface_loopback_name }}{{ network_interface_file_postfix }}"
    #         compare_lines_to: |
    #           auto lo
              
    #   when:
    #     - ansible_distribution == "Debian"
    #     - not (network_interface_implicit_loopback | bool )
      
    - include_tasks: helpers/backup_and_restore_original_network_config.yaml
      vars:
        action: restore
