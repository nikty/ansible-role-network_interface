- hosts: all
  vars:
    network_configured_interfaces_only: yes
    network_restart_interfaces: false
    network_interface_implicit_loopback: true
  become: yes
  tasks:

    - include_tasks: helpers/backup_and_restore_original_network_config.yaml
      vars:
        action: backup

    - name: Configure loopback only
      import_role:
        name: network_interface
      vars:
        network_ether_interfaces:
          - device: lo
            debian_command_options:
              - 'up true'
              - 'down true'
              

    - pause:
      when: lookup('env', 'TEST_PAUSE')
      
    - include_tasks: helpers/backup_and_restore_original_network_config.yaml
      vars:
        action: restore
