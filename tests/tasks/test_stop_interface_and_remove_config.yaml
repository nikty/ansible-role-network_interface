- name: Stop interface
  include_tasks: system_interface_control.yaml
  vars:
    interface: "{{ test_iface_name }}"
    state: down

- name: Assert interface is down
  include_tasks: test_interface_state.yaml
  vars:
    interface: "{{ test_iface_name }}"
    state: down

- name: Test removing interface configuration
  import_role:
    name: network_interface
  vars:
    network_ether_interfaces:
      - device: "{{ test_iface_name }}"
        present: no

- name: Test interface configuration is absent
  include_tasks: tasks/test_interface_config_is_absent.yaml

